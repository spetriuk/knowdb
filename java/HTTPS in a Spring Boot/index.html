
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.1">
    
    
      
        <title>HTTPS in a Spring Boot - KnowDB</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.9299cb39.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KnowDB" class="md-header__button md-logo" aria-label="KnowDB" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KnowDB
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HTTPS in a Spring Boot
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue" type="radio" name="__palette" id="__palette_1">
          <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
          </label>
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="cyan" type="radio" name="__palette" id="__palette_2">
          <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
          </label>
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KnowDB" class="md-nav__button md-logo" aria-label="KnowDB" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    KnowDB
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Algorithms
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Algorithms" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Algorithms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/B-Tree.%201.%20Introduction/" class="md-nav__link">
        B Tree. 1. Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/B-Tree.%202.%20Insert%20Operation/" class="md-nav__link">
        B Tree. 2. Insert Operation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/B-Tree.%203.%20Delete%20Operation/" class="md-nav__link">
        B Tree. 3. Delete Operation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Docker
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Docker" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/Exec%20Docker%20Command/" class="md-nav__link">
        Exec Docker Command
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/Keycloak%20Docker/" class="md-nav__link">
        Keycloak Docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/Mongodb%20Docker/" class="md-nav__link">
        Mongodb Docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/PgAdmin%204%20docker/" class="md-nav__link">
        PgAdmin 4 docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/PostgreSQL%20Docker/" class="md-nav__link">
        PostgreSQL Docker
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Git
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Git" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/Create%20Empty%20Branch%20in%20Git/" class="md-nav__link">
        Create Empty Branch in Git
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/Delete%20branch%20local_remote/" class="md-nav__link">
        Delete branch local remote
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/%D0%81%D0%B1%D0%B0%D0%BD%D1%8B%D0%B9%20Git%21%21%21/" class="md-nav__link">
        Ёбаный Git!!!
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0%20Git%20stash.%20%D0%9A%D0%B0%D0%BA%20%D0%BF%D1%80%D1%8F%D1%82%D0%B0%D1%82%D1%8C%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%B2%20Git/" class="md-nav__link">
        Команда Git stash. Как прятать изменения в Git
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Java
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Java" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%40Before%20%40BeforeClass%20%40BeforeEach%20%40BeforeAll/" class="md-nav__link">
        @Before @BeforeClass @BeforeEach @BeforeAll
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Access%20value%20in%20application.properties%20Spring%20Boot/" class="md-nav__link">
        Access value in application.properties Spring Boot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Change%20the%20Default%20Port%20in%20Spring%20Boot/" class="md-nav__link">
        Change the Default Port in Spring Boot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Circuit%20Breaker%20pattern/" class="md-nav__link">
        Circuit Breaker pattern
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Export%20%26%20Download%20Data%20as%20CSV%20File%20in%20Spring%20Boot/" class="md-nav__link">
        Export & Download Data as CSV File in Spring Boot
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          HTTPS in a Spring Boot
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        HTTPS in a Spring Boot
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1a-generate-a-self-signed-ssl-certificate" class="md-nav__link">
    1a. Generate a self-signed SSL certificate
  </a>
  
    <nav class="md-nav" aria-label="1a. Generate a self-signed SSL certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-an-ssl-certificate-in-a-keystore" class="md-nav__link">
    Generate an SSL certificate in a keystore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-the-keystore-content" class="md-nav__link">
    Verify the keystore content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convert-a-jks-keystore-into-pkcs12" class="md-nav__link">
    Convert a JKS keystore into PKCS12
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1b-use-an-existing-ssl-certificate" class="md-nav__link">
    1b. Use an existing SSL certificate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-enable-https-in-spring-boot" class="md-nav__link">
    2. Enable HTTPS in Spring Boot
  </a>
  
    <nav class="md-nav" aria-label="2. Enable HTTPS in Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-https-in-spring-boot-1" class="md-nav__link">
    Enable HTTPS in Spring Boot 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-https-in-spring-boot-2" class="md-nav__link">
    Enable HTTPS in Spring Boot 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-ssl-in-spring-boot" class="md-nav__link">
    Configuring SSL in Spring Boot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-spring-security-to-require-https-requests" class="md-nav__link">
    Configure Spring Security to require HTTPS requests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-redirect-http-requests-to-https" class="md-nav__link">
    3. Redirect HTTP requests to HTTPS
  </a>
  
    <nav class="md-nav" aria-label="3. Redirect HTTP requests to HTTPS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-tomcat-for-spring-boot-1" class="md-nav__link">
    Configuring Tomcat for Spring Boot 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-tomcat-for-spring-boot-2" class="md-nav__link">
    Configuring Tomcat for Spring Boot 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-distribute-the-ssl-certificate-to-clients" class="md-nav__link">
    4. Distribute the SSL certificate to clients
  </a>
  
    <nav class="md-nav" aria-label="4. Distribute the SSL certificate to clients">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-a-browser-trust-an-ssl-certificate" class="md-nav__link">
    Make a browser trust an SSL certificate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-an-ssl-certificate-inside-the-jre-keystore" class="md-nav__link">
    Import an SSL certificate inside the JRE keystore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Integration%20Testing%20in%20Spring%20_%20Baeldung/" class="md-nav__link">
        Integration Testing in Spring   Baeldung
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Jackson%20XML%20annotations/" class="md-nav__link">
        Jackson XML annotations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Java%20Stream%20API/" class="md-nav__link">
        Java Stream API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Modularizing%20a%20Spring%20Boot%20Application/" class="md-nav__link">
        Modularizing a Spring Boot Application
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../PKIX%20path%20building%20failed%20%D0%BF%D1%80%D0%B8%20SSL%20%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B8/" class="md-nav__link">
        PKIX path building failed при SSL соединении
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Spring%20REST%20Error%20Handling%20Example/" class="md-nav__link">
        Spring REST Error Handling Example
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Spring%20Security%20Keycloak%20Spring%20Boot/" class="md-nav__link">
        Spring Security Keycloak Spring Boot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Uploading%20and%20Parsing%20CSV%20File%20using%20Spring%20Boot/" class="md-nav__link">
        Uploading and Parsing CSV File using Spring Boot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%D0%AE%D0%BD%D0%B8%D1%82-%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%BB%D1%8F%20%D1%87%D0%B0%D0%B9%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/" class="md-nav__link">
        Юнит тестирование для чайников
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Kafka
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kafka" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Kafka
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/Kafka%20local%20cluster%20run/" class="md-nav__link">
        Kafka local cluster run
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/KafkaTemplate/" class="md-nav__link">
        KafkaTemplate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/Setting%20Up%20Kafka/" class="md-nav__link">
        Setting Up Kafka
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Linux
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/AppImage%20Repack/" class="md-nav__link">
        AppImage Repack
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Bash%20read%20Command/" class="md-nav__link">
        Bash read Command
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Bash%20remove%20recursive%20by%20extension/" class="md-nav__link">
        Bash remove recursive by extension
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Bash-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B%20%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%BE/" class="md-nav__link">
        Bash скрипты начало
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Bash_%20Write%20to%20File/" class="md-nav__link">
        Bash  Write to File
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Check%20for%20Listening%20Ports%20in%20Linux/" class="md-nav__link">
        Check for Listening Ports in Linux
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Checksum%20verify%20with%20GtkHash/" class="md-nav__link">
        Checksum verify with GtkHash
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Cinnamon%20theme%20switch%20script/" class="md-nav__link">
        Cinnamon theme switch script
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/GTK%203.16%20Fix%20Large%20Black%20Borders%20Around%20Windows/" class="md-nav__link">
        GTK 3.16 Fix Large Black Borders Around Windows
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Grep%20%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%20%D0%B2%D0%BD%D1%83%D1%82%D1%80%D0%B8%20%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2/" class="md-nav__link">
        Grep поиск внутри файлов
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Joplin%20Terminal/" class="md-nav__link">
        Joplin Terminal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/KeePassXC%20with%20synchronization/" class="md-nav__link">
        KeePassXC with synchronization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Kill%20process%20by%20used%20port%20Ubuntu/" class="md-nav__link">
        Kill process by used port Ubuntu
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Mosquitto/" class="md-nav__link">
        Mosquitto
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Mouse%20Buttons%20Bind%20To%20Keyboard%20Keys%20Or%20Commands/" class="md-nav__link">
        Mouse Buttons Bind To Keyboard Keys Or Commands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Nemo%20add%20keyboard%20shortcuts/" class="md-nav__link">
        Nemo add keyboard shortcuts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Nemo%20context%20menu%20action/" class="md-nav__link">
        Nemo context menu action
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Notifications%20with%20notify-send/" class="md-nav__link">
        Notifications with notify send
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/PDF%20create%20from%20images/" class="md-nav__link">
        PDF create from images
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/PDF%20file%20Compress/" class="md-nav__link">
        PDF file Compress
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Port%20forwarding/" class="md-nav__link">
        Port forwarding
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Terminal%20set%20wrong%20sudo%20password%20message/" class="md-nav__link">
        Terminal set wrong sudo password message
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/Thunderbird%20Tray%20Icon/" class="md-nav__link">
        Thunderbird Tray Icon
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/sha256%20check/" class="md-nav__link">
        Sha256 check
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/%D0%90%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5%20%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%B8%D1%81%D0%BA%D0%B0/" class="md-nav__link">
        Автоматическое монтирование диска
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Mongodb
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Mongodb" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Mongodb
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mongodb/Authentication%20mongo%20with%20docker-compose/" class="md-nav__link">
        Authentication mongo with docker compose
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../mongodb/MongoDB%20Cheat%20Sheet/" class="md-nav__link">
        MongoDB Cheat Sheet
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Windows
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Windows" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Windows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../windows/%D0%9F%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20ext4%20%D0%B2%20Windows/" class="md-nav__link">
        Подключение ext4 в Windows
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1a-generate-a-self-signed-ssl-certificate" class="md-nav__link">
    1a. Generate a self-signed SSL certificate
  </a>
  
    <nav class="md-nav" aria-label="1a. Generate a self-signed SSL certificate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-an-ssl-certificate-in-a-keystore" class="md-nav__link">
    Generate an SSL certificate in a keystore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-the-keystore-content" class="md-nav__link">
    Verify the keystore content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convert-a-jks-keystore-into-pkcs12" class="md-nav__link">
    Convert a JKS keystore into PKCS12
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1b-use-an-existing-ssl-certificate" class="md-nav__link">
    1b. Use an existing SSL certificate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-enable-https-in-spring-boot" class="md-nav__link">
    2. Enable HTTPS in Spring Boot
  </a>
  
    <nav class="md-nav" aria-label="2. Enable HTTPS in Spring Boot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-https-in-spring-boot-1" class="md-nav__link">
    Enable HTTPS in Spring Boot 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-https-in-spring-boot-2" class="md-nav__link">
    Enable HTTPS in Spring Boot 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-ssl-in-spring-boot" class="md-nav__link">
    Configuring SSL in Spring Boot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-spring-security-to-require-https-requests" class="md-nav__link">
    Configure Spring Security to require HTTPS requests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-redirect-http-requests-to-https" class="md-nav__link">
    3. Redirect HTTP requests to HTTPS
  </a>
  
    <nav class="md-nav" aria-label="3. Redirect HTTP requests to HTTPS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-tomcat-for-spring-boot-1" class="md-nav__link">
    Configuring Tomcat for Spring Boot 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-tomcat-for-spring-boot-2" class="md-nav__link">
    Configuring Tomcat for Spring Boot 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-distribute-the-ssl-certificate-to-clients" class="md-nav__link">
    4. Distribute the SSL certificate to clients
  </a>
  
    <nav class="md-nav" aria-label="4. Distribute the SSL certificate to clients">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-a-browser-trust-an-ssl-certificate" class="md-nav__link">
    Make a browser trust an SSL certificate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-an-ssl-certificate-inside-the-jre-keystore" class="md-nav__link">
    Import an SSL certificate inside the JRE keystore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>HTTPS in a Spring Boot</h1>
                
                <p>HTTPS in a Spring Boot</p>
<p>Setting up HTTPS for Spring Boot requires two steps:</p>
<ol>
<li>Getting an SSL certificate;</li>
<li>Configuring SSL in Spring Boot.</li>
</ol>
<p>We can generate an SSL certificate ourselves (self-signed certificate). Its use is intended just for development and testing purposes. In production, we should use a certificate issued by a trusted Certificate Authority (CA).</p>
<p>In either case, we're going to see how to enable HTTPS in a Spring Boot application. Examples will be shown both for Spring Boot 1 and Spring Boot 2.</p>
<h2 id="introduction">Introduction</h2>
<p>In this tutorial, we're going to:</p>
<ol>
<li>Get an SSL certificate<ul>
<li>Generate a self-signed SSL certificate</li>
<li>Use an existing SSL certificate</li>
</ul>
</li>
<li>Enable HTTPS in Spring Boot</li>
<li>Redirect HTTP requests to HTTPS</li>
<li>Distribute the SSL certificate to clients.</li>
</ol>
<p>If you don't already have a certificate, follow the step 1a. If you have already got an SSL certificate, you can follow the step 1b.</p>
<p>Throughout this tutorial, I'll use the following technologies and tools:</p>
<ul>
<li>Java JDK 8</li>
<li>Spring Boot 2.2.2 and Spring Boot 1.5.22</li>
<li>keytool</li>
</ul>
<p>Keytool is a certificate management utility provided together with the JDK, so if you have the JDK installed, you should already have keytool available. To check it, try running the command <code>keytool --help</code> from your Terminal prompt. Note that if you are on Windows, you might need to launch it from the <em>\bin</em> folder. For more information about this utility, you can read the <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html">official documentation</a>.</p>
<p>On GitHub, you can find the <a href="https://github.com/ThomasVitale/spring-tutorials/tree/master/spring-boot-https">source code</a> for the application we are building in this tutorial.</p>
<h2 id="1a-generate-a-self-signed-ssl-certificate">1a. Generate a self-signed SSL certificate</h2>
<p>First of all, we need to generate a pair of cryptographic keys, use them to produce an SSL certificate and store it in a keystore. The <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html#keytool_option_genkeypair">keytool documentation</a> defines a keystore as a database of "cryptographic keys, X.509 certificate chains, and trusted certificates".</p>
<p>To enable HTTPS, we'll provide a Spring Boot application with this keystore containing the SSL certificate.</p>
<p>The two most common formats used for keystores are JKS, a proprietary format specific for Java, and PKCS12, an industry-standard format. JKS used to be the default choice, but now Oracle recommends to adopt the PKCS12 format. We're going to see how to use both.</p>
<h3 id="generate-an-ssl-certificate-in-a-keystore">Generate an SSL certificate in a keystore</h3>
<p>Let's open our Terminal prompt and write the following command to create a <strong>JKS keystore</strong>:</p>
<div class="highlight"><pre><span></span><code>keytool -genkeypair -alias tomcat -keyalg RSA -keysize 2048 -keystore keystore.jks -validity 3650 -storepass password
</code></pre></div>
<p>To create a <strong>PKCS12 keystore</strong>, and we should, the command is the following:</p>
<div class="highlight"><pre><span></span><code>keytool -genkeypair -alias tomcat -keyalg RSA -keysize 2048 -storetype PKCS12 -keystore keystore.p12 -validity 3650 -storepass password
</code></pre></div>
<p>Let's have a closer look at the command we just run:</p>
<ul>
<li><code>genkeypair</code>: generates a key pair;</li>
<li><code>alias</code>: the alias name for the item we are generating;</li>
<li><code>keyalg</code>: the cryptographic algorithm to generate the key pair;</li>
<li><code>keysize</code>: the size of the key. We have used 2048 bits, but 4096 would be a better choice for production;</li>
<li><code>storetype</code>: the type of keystore;</li>
<li><code>keystore</code>: the name of the keystore;</li>
<li><code>validity</code>: validity number of days;</li>
<li><code>storepass</code>: a password for the keystore.</li>
</ul>
<p>When running the previous command, we will be asked to input some information, but we are free to skip all of it (just press <em>Return</em> to skip an option). When asked if the information is correct, we should type <em>yes</em>. Finally, we hit return to use the keystore password as key password as well.</p>
<div class="highlight"><pre><span></span><code>What is your first and last name? 
    [Unknown]: 
What is the name of your organizational unit? 
    [Unknown]: 
What is the name of your organization? 
    [Unknown]: 
What is the name of your City or Locality? 
    [Unknown]: 
What is the name of your State or Province? 
    [Unknown]: 
What is the two-letter country code for this unit? 
    [Unknown]: 
Is CN=localhost, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown correct? 
    [no]: yes 

Enter key password for &lt;tomcat&gt; 
    (RETURN if same as keystore password):
</code></pre></div>
<p>At the end of this operation, we'll get a keystore containing a brand new SSL certificate.</p>
<h3 id="verify-the-keystore-content">Verify the keystore content</h3>
<p>To check the content of the keystore following the <strong>JKS</strong> format, we can use keytool again:</p>
<div class="highlight"><pre><span></span><code>keytool -list -v -keystore keystore.jks
</code></pre></div>
<p>To test the content of a keystore following the <strong>PKCS12</strong> format:</p>
<div class="highlight"><pre><span></span><code>keytool -list -v -storetype pkcs12 -keystore keystore.p12
</code></pre></div>
<h3 id="convert-a-jks-keystore-into-pkcs12">Convert a JKS keystore into PKCS12</h3>
<p>Should we have already a JKS keystore, we have the option to migrate it to PKCS12; keytool has a convenient command for that:</p>
<div class="highlight"><pre><span></span><code>keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore.p12 -deststoretype pkcs12
</code></pre></div>
<h2 id="1b-use-an-existing-ssl-certificate">1b. Use an existing SSL certificate</h2>
<p>In case we have already got an SSL certificate, for example, one issued by <a href="https://letsencrypt.org/">Let's Encrypt</a>, we can import it into a keystore and use it to enable HTTPS in a Spring Boot application.</p>
<p>We can use keytool to import our certificate in a new keystore.</p>
<div class="highlight"><pre><span></span><code>keytool -import -alias tomcat -file myCertificate.crt -keystore keystore.p12 -storepass password
</code></pre></div>
<p>To get more information about the keystore and its format, please refer to the previous section.</p>
<h2 id="2-enable-https-in-spring-boot">2. Enable HTTPS in Spring Boot</h2>
<p>Whether our keystore contains a self-signed certificate or one issued by a trusted Certificate Authority, we can now set up Spring Boot to accept requests over HTTPS instead of HTTP by using that certificate.</p>
<p>The first thing to do is placing the keystore file inside the Spring Boot project. We want to put it in the <em>resources</em> folder or the root folder.</p>
<p>Then, we configure the server to use our brand new keystore and enable https. Let's go through the steps both for Spring Boot 1 and Spring Boot 2.</p>
<h3 id="enable-https-in-spring-boot-1">Enable HTTPS in Spring Boot 1</h3>
<p>Let's open our <em>application.properties</em> file (or <em>application.yml</em>) and define the following properties:</p>
<div class="highlight"><pre><span></span><code>server.port=8443

server.ssl.key-store-type=PKCS12
server.ssl.key-store=classpath:keystore.p12
server.ssl.key-store-password=password
server.ssl.key-alias=tomcat

security.require-ssl=true
</code></pre></div>
<p>application.properties (Spring Boot 1)</p>
<h3 id="enable-https-in-spring-boot-2">Enable HTTPS in Spring Boot 2</h3>
<p>To enable HTTPS for our Spring Boot 2 application, let's open our <em>application.yml</em> file (or <em>application.properties</em>) and define the following properties:</p>
<div class="highlight"><pre><span></span><code>server:
  ssl:
    key-store: classpath:keystore.p12
    key-store-password: password
    key-store-type: pkcs12
    key-alias: tomcat
    key-password: password
  port: 8443
</code></pre></div>
<p>application.yml (Spring Boot 2)</p>
<h3 id="configuring-ssl-in-spring-boot">Configuring SSL in Spring Boot</h3>
<p>Let's have a closer look at the SSL configuration we have just defined in our Spring Boot application properties.</p>
<ul>
<li><code>server.port</code>: the port on which the server is listening. We have used <code>8443</code> rather than the default <code>8080</code> port.</li>
<li><code>server.ssl.key-store</code>: the path to the key store that contains the SSL certificate. In our example, we want Spring Boot to look for it in the classpath.</li>
<li><code>server.ssl.key-store-password</code>: the password used to access the key store.</li>
<li><code>server.ssl.key-store-type</code>: the type of the key store (JKS or PKCS12).</li>
<li><code>server.ssl.key-alias</code>: the alias that identifies the key in the key store.</li>
<li><code>server.ssl.key-password</code>: the password used to access the key in the key store.</li>
</ul>
<h3 id="configure-spring-security-to-require-https-requests">Configure Spring Security to require HTTPS requests</h3>
<p>When using Spring Security, we can configure it to require automatically block any request coming from a non-secure HTTP channel.</p>
<p>In a Spring Boot 1 application, we can achieve that by setting the <code>security.require-ssl</code> property to <code>true</code>, without explicitly touching our Spring Security configuration class.</p>
<p>To achieve the same result in a Spring Boot 2 application, we need to extend the <code>WebSecurityConfigurerAdapter</code> class, since the <code>security.require-ssl</code> property has been deprecated.</p>
<div class="highlight"><pre><span></span><code>@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .requiresChannel()
            .anyRequest()
            .requiresSecure();
    }
}
</code></pre></div>
<p>SecurityConfig.java (Spring Boot 2)</p>
<p>For more information about how to configure SSL in Spring Boot, you can have a look at the <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-configure-ssl">Reference Guide</a>. If you want to find out which properties are available to configure SSL, you can refer to the <a href="https://github.com/spring-projects/spring-boot/blob/v1.5.8.RELEASE/spring-boot/src/main/java/org/springframework/boot/context/embedded/Ssl.java">definition</a> in the code-base.</p>
<p>Congratulations! You have successfully enabled HTTPS in your Spring Boot application! Give it a try: run the application, open your browser and check if everything works as it should.</p>
<h2 id="3-redirect-http-requests-to-https">3. Redirect HTTP requests to HTTPS</h2>
<p>Now that we have enabled HTTPS in our Spring Boot application and blocked any HTTP request, we want to redirect all traffic to HTTPS.</p>
<p>Spring allows defining just one network connector in <em>application.properties</em> (or <em>application.yml</em>). Since we have used it for HTTPS, we have to set the HTTP connector programmatically for our Tomcat web server.</p>
<p>The implementations for Spring Boot 1 and Spring Boot 2 are almost the same. The only difference is that some classes for server configuration have been renamed in Spring Boot 2.</p>
<h3 id="configuring-tomcat-for-spring-boot-1">Configuring Tomcat for Spring Boot 1</h3>
<div class="highlight"><pre><span></span><code>@Configuration
public class ServerConfig {

  @Bean
  public EmbeddedServletContainerFactory servletContainer() {
    TomcatEmbeddedServletContainerFactory tomcat = new TomcatEmbeddedServletContainerFactory() {
      @Override
      protected void postProcessContext(Context context) {
        SecurityConstraint securityConstraint = new SecurityConstraint();
        securityConstraint.setUserConstraint(&quot;CONFIDENTIAL&quot;);
        SecurityCollection collection = new SecurityCollection();
        collection.addPattern(&quot;/*&quot;);
        securityConstraint.addCollection(collection);
        context.addConstraint(securityConstraint);
      }
    };
    tomcat.addAdditionalTomcatConnectors(getHttpConnector());
    return tomcat;
  }

  private Connector getHttpConnector() {
    Connector connector = new Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;);
    connector.setScheme(&quot;http&quot;);
    connector.setPort(8080);
    connector.setSecure(false);
    connector.setRedirectPort(8443);
    return connector;
  }
}
</code></pre></div>
<p>ServerConfig.java (Spring Boot 1)</p>
<h3 id="configuring-tomcat-for-spring-boot-2">Configuring Tomcat for Spring Boot 2</h3>
<div class="highlight"><pre><span></span><code>@Configuration
public class ServerConfig {

    @Bean
    public ServletWebServerFactory servletContainer() {
        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory() {
            @Override
            protected void postProcessContext(Context context) {
                SecurityConstraint securityConstraint = new SecurityConstraint();
                securityConstraint.setUserConstraint(&quot;CONFIDENTIAL&quot;);
                SecurityCollection collection = new SecurityCollection();
                collection.addPattern(&quot;/*&quot;);
                securityConstraint.addCollection(collection);
                context.addConstraint(securityConstraint);
            }
        };
        tomcat.addAdditionalTomcatConnectors(getHttpConnector());
        return tomcat;
    }

    private Connector getHttpConnector() {
        Connector connector = new Connector(TomcatServletWebServerFactory.DEFAULT_PROTOCOL);
        connector.setScheme(&quot;http&quot;);
        connector.setPort(8080);
        connector.setSecure(false);
        connector.setRedirectPort(8443);
        return connector;
    }
}
</code></pre></div>
<p>ServerConfig.java (Spring Boot 2)</p>
<h2 id="4-distribute-the-ssl-certificate-to-clients">4. Distribute the SSL certificate to clients</h2>
<p>When using a self-signed SSL certificate, our browser won't trust our application and will warn the user that it's not secure. And that'll be the same with any other client.</p>
<p>It's possible to make a client trust our application by providing it with our certificate.</p>
<p>We have stored our certificate inside a keystore, so we need to extract it. Again, keytool supports us very well:</p>
<div class="highlight"><pre><span></span><code>keytool -export -keystore keystore.jks -alias tomcat -file myCertificate.crt
</code></pre></div>
<p>The keystore can be in JKS or PKCS12 format. During the execution of this command, keytool will ask us for the keystore password that we set at the beginning of this tutorial (the extremely secure <em>password</em>).</p>
<p>Now we can import our certificate into our client. Later, we'll see how to import the certificate into the JRE in case we need it to trust our application.</p>
<h3 id="make-a-browser-trust-an-ssl-certificate">Make a browser trust an SSL certificate</h3>
<p>When using a keystore in the industry-standard PKCS12 format, we should be able to use it directly without extracting the certificate.</p>
<p>I suggest you check the official guide on how to import a PKCS12 file into your specific client. On macOS, for example, we can directly import a certificate into the Keychain Access (which browsers like Safari, Chrome and Opera rely on to manage certificates).</p>
<p>If deploying the application on <em>localhost</em>, we may need to do a further step from our browser: enabling insecure connections with <em>localhost</em>.</p>
<p>In Firefox, we are shown an alert message. To access the application, we need to explicitly define an exception for it and make Firefox trust the certificate.</p>
<p>In Chrome, we can write the following URL in the search bar: <code>chrome://flags/#allow-insecure-localhost</code> and activate the relative option.</p>
<h3 id="import-an-ssl-certificate-inside-the-jre-keystore">Import an SSL certificate inside the JRE keystore</h3>
<p>To make the JRE trust our certificate, we need to import it inside <em>cacerts</em>: the JRE trust store in charge of holding all certificates that can be trusted.</p>
<p>First, we need to know the path to our JDK home. A quick way to find it, if we are using Eclipse or STS as our IDE, is by going to <em>Preferences &gt; Java &gt; Installed JREs</em>. If using IntelliJ IDEA, we can access this information by going to <em>Project Structure &gt; SDKs</em> and look at the value of the <em>JDK home path</em> field.</p>
<p>On macOS, it could be something like <em>/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home.</em> In the following, we'll refer to this location by using the placeholder <code>$JDK_HOME</code>.</p>
<p>Then, from our Terminal prompt, let's insert the following command (we might need to run it with administrator privileges by prefixing it with <code>sudo</code>):</p>
<div class="highlight"><pre><span></span><code>keytool -importcert -file myCertificate.crt -alias tomcat -keystore $JDK_HOME/jre/lib/security/cacerts
</code></pre></div>
<p>We'll be asked to input the JRE keystore password. If you have never changed it, it should be the default one: <em>changeit</em> or <em>changeme</em>, depending on the operating system. Finally, keytool will ask if you want to trust this certificate: let's say <em>yes</em>.</p>
<p>If everything went right, we'd see the message <em>Certificate was added to keystore</em>. Great!</p>
<h2 id="conclusion">Conclusion</h2>
<p>In this tutorial, we have seen how to generate a self-signed SSL certificate, how to import an existing certificate into a keystore, how to use it to enable HTTPS inside a Spring Boot application, how to redirect HTTP to HTTPS and how to extract and distribute the certificate to clients.</p>
<p>On GitHub, you can find the <a href="https://github.com/ThomasVitale/spring-tutorials/tree/master/spring-boot-https">source code</a> for the application we have built in this tutorial.</p>
<p>If you want to protect the access to some resources of your application, consider using <a href="https://www.thomasvitale.com/introducing-keycloak-identity-access-management/">Keycloak</a> for the authentication and authorization of the users visiting your <a href="https://www.thomasvitale.com/spring-boot-keycloak-security/">Spring Boot</a> or <a href="https://www.thomasvitale.com/spring-security-keycloak/">Spring Security</a> application.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/reference/html/howto.html#howto-configure-ssl">Spring Boot Docs - Configure SSL</a></li>
<li><a href="https://github.com/spring-projects/spring-boot/blob/v2.2.2.RELEASE/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/server/Ssl.java">Spring Boot Docs - SSL Configuration</a></li>
</ul>
<p><em>Last update: 15/12/2019</em></p>
<hr />
<p><a href="https://www.thomasvitale.com/https-spring-boot-ssl-certificate/">Source</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../Export%20%26%20Download%20Data%20as%20CSV%20File%20in%20Spring%20Boot/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Export & Download Data as CSV File in Spring Boot
            </div>
          </div>
        </a>
      
      
        <a href="../Integration%20Testing%20in%20Spring%20_%20Baeldung/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Integration Testing in Spring   Baeldung
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/spetriuk" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/in/serhii-petriuk/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.7353b375.min.js"></script>
      
    
  </body>
</html>